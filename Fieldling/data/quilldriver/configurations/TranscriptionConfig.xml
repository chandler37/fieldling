<?xml version="1.0" encoding="UTF-8"?>
<qd-configuration>
                <parameters>
                        <newtemplate val="'TranscriptionNew.xml'"/>
                        <parameter name="qd.title" val="/TEXT/HEADER/TITLE"/>
                        <parameter name="qd.mediaurl" val="/TEXT/HEADER/SOUNDFILE/@href"/>
                        <parameter name="qd.timealignednodes" val="//*[AUDIO]"/>
                        <parameter name="qd.nodebegins" val="AUDIO/@start"/>
                        <parameter name="qd.nodeends" val="AUDIO/@end"/>
                        <parameter name="qd.nearestplayableparent" val="ancestor-or-self::*[AUDIO]"/>
                </parameters>
	        <actions>
			<action name="PlayPause" keystroke="control SLASH" node="." move="false" qd-command="playPause"/>
			<action name="PlayBack" keystroke="control QUOTE" node="." move="false" qd-command="playBack"/>
			<action name="PlayNextLine" keystroke="control shift DOWN" node="following::*[AUDIO]" qd-command="playNode"/>
			<action name="PlayCurrentLine" keystroke="control LEFT" node="ancestor-or-self::*[AUDIO]" move="false" qd-command="playNode"/>
			<action name="PlayEndofCurrentLine" keystroke="control RIGHT" node="ancestor-or-self::*[AUDIO]" move="false" qd-command="playEdge"/>
			<action name="PlayPreviousLine" keystroke="control shift UP" node="preceding::*[AUDIO]" qd-command="playNode"/>
			<action name="GotoStart" keystroke="control L" node="ancestor-or-self::S" qd-command="seekStart"/>
			<action name="GotoEnd" keystroke="control SEMICOLON" node="ancestor-or-self::S" qd-command="seekEnd"/>
			<action name="NextSentence" keystroke="control DOWN" node="following::S"/>
			<action name="PreviousSentence" keystroke="control UP" node="preceding::S"/>
                        
			<action name="FixMedia" keystroke="control INSERT" node="ancestor-or-self::TEXT/HEADER/SOUNDFILE" xsl-task="fixMedia"/>
			<action name="AddSpeaker" keystroke="control J" node="ancestor-or-self::TEXT/HEADER" xsl-task="addSpeaker"/>
			<action name="DeleteSpeaker" keystroke="control K" node="ancestor-or-self::SPEAKER" xsl-task="removeNode"/>
			<action name="ChangeSpeaker" keystroke="control 1" node="ancestor-or-self::S" xsl-task="changeSpeaker"/>

			<action name="MarkStartTime" keystroke="control COMMA" node="ancestor-or-self::S" xsl-task="markStart"/>
			<action name="MarkStopTime" keystroke="control PERIOD" node="ancestor-or-self::S" xsl-task="markStop" qd-command="stopMedia"/>
			<action name="MarkStartAndStop" keystroke="control shift QUOTE" node="ancestor-or-self::S" xsl-task="qd.insertTimes"/>
			<action name="ZapTimeCodes" keystroke="control shift SLASH" node="ancestor-or-self::S" xsl-task="zapTimes"/>
			<action name="IncreaseStartTime" keystroke="control EQUALS" node="ancestor-or-self::S" xsl-task="increaseStart"/>
			<action name="RapidIncreaseStart" keystroke="alt control EQUALS" node="ancestor-or-self::S" xsl-task="rapidIncreaseStart"/>
			<action name="DecreaseStartTime" keystroke="control MINUS" node="ancestor-or-self::S" xsl-task="decreaseStart"/>
			<action name="RapidDecreaseStart" keystroke="alt control MINUS" node="ancestor-or-self::S" xsl-task="rapidDecreaseStart"/>
			<action name="IncreaseStopTime" keystroke="control CLOSE_BRACKET" node="ancestor-or-self::S" xsl-task="increaseStop"/>
			<action name="RapidIncreaseStop" keystroke="alt control CLOSE_BRACKET" node="ancestor-or-self::S" xsl-task="rapidIncreaseStop"/>
			<action name="MaximizeStop" keystroke="alt control BACK_SLASH" node="ancestor-or-self::S" xsl-task="maximizeStop"/>
			<action name="DecreaseStopTime" keystroke="control OPEN_BRACKET" node="ancestor-or-self::S" xsl-task="decreaseStop"/>
			<action name="RapidDecreaseStop" keystroke="alt control OPEN_BRACKET" node="ancestor-or-self::S" xsl-task="rapidDecreaseStop"/>

			<action name="InsertAfter" keystroke="control M" node="ancestor-or-self::S" xsl-task="insertAfter"/>
			<action name="InsertBefore" keystroke="control B" node="ancestor-or-self::S" xsl-task="insertBefore"/>
			<action name="DeleteSentence" keystroke="control R" node="ancestor-or-self::S" xsl-task="removeNode"/>
			<action name="InsertTranslation" keystroke="control T" node="ancestor-or-self::S" xsl-task="insertTranslation"/>
			<action name="DeleteTranslation" keystroke="control alt T" node="ancestor-or-self::TRANSL" xsl-task="removeNode"/>

			<action name="AddGeneralNote" keystroke="alt N" node="ancestor-or-self::S" xsl-task="addGeneral"/>
			<action name="AddLexicalNote" keystroke="alt L" node="ancestor-or-self::S" xsl-task="addLexical"/>
			<action name="AddGrammaticalNote" keystroke="alt G" node="ancestor-or-self::S" xsl-task="addGrammatical"/>
			<action name="AddPronunciationNote" keystroke="alt P" node="ancestor-or-self::S" xsl-task="addPronunciation"/>
			<action name="AddInterpretiveNote" keystroke="alt I" node="ancestor-or-self::S" xsl-task="addInterpretive"/>
			<action name="AddSociolinguisticNote" keystroke="alt S" node="ancestor-or-self::S" xsl-task="addSociolinguistic"/>
			<action name="AddCulturalNote" keystroke="alt C" node="ancestor-or-self::S" xsl-task="addCultural"/>
			<action name="DeleteNote" keystroke="alt D" node="ancestor-or-self::NOTE" xsl-task="removeNode"/>
                </actions>
		<rendering-instructions>
			<tag name="TEXT">
				<attribute name="xml:lang" visible="false"/>
				<desc>Display TEXT tag but not its attributes.</desc>
			</tag>
			<tag name="TITLE">
				<attribute name="xml:lang" visible="false"/>
				<desc>Display TITLE tag but not its attributes.</desc>
			</tag>
                        <tag name="SPEAKER" tibetancontents="true"/>
			<tag name="NOTE" displayas="@type">
				<attribute name="type" visible="false"/>
				<desc>This tells QuillDriver to render the NOTE tag as the value of its
				'type' attribute.</desc>
			</tag>
			<tag name="AUDIO" visible="false" visiblecontents="false">
				<desc>This tells QuillDriver to not render the AUDIO tag at all. We do not render this tag since
				time codes are already marked under the video in the time coding area.</desc>
			</tag>
			<!-- <tag name="S" displayas="id(@who)" tibetan="true"> -->
                        <tag name="S" displayas="id(./@who)" tibetan="true">
				<attribute name="id" visible="false"/>
				<attribute name="who" visible="false"/>
				<desc>This tells QuillDriver to display the S tag as 'S', and to display its contents,
				but to visually suppress its 'id' attribute.</desc>
			</tag>
			<tagview name="ShowEverything" keystroke="F1">
				<tag name="FORM" displayas="'bod yig'" tibetan="true" tibetancontents="true">
					<attribute name="type" visible="false"/>
					<desc>This tells QuillDriver to display the FORM tag as 'TIB', and to display its contents,
					but to visually suppress its 'type' attribute.</desc>
				</tag>
				<tag name="TRANSL" displayas="'ENG'">
					<attribute name="xml:lang" visible="false"/>
					<desc>This tells QuillDriver to display the TRANSL tag as 'ENG', and to display its contents,
					but to visually suppress its 'xml:lang' attribute.</desc>
				</tag>
				<tag name="NOTE" displayas="@type">
					<attribute name="type" visible="false"/>
					<desc>This tells QuillDriver to render the NOTE tag as the value of its
					'type' attribute.</desc>
				</tag>
			</tagview>
			<tagview name="TranscriptionOnly" keystroke="F2">
                                <tag name="S" visible="false" visiblecontents="true">
                                         <attribute name="who" visible="false"/>
                                    <attribute name="id" visible="false"/>
                                    <desc>This tells QuillDriver to display the S tag as 'S', and to display its contents,
                                    but to visually suppress its 'id' attribute.</desc>
                                </tag>
                                <tag name="FORM" displayas="if (../@who=../preceding-sibling::S[1]/@who) then '' else (id(../@who))" tibetan="true" tibetancontents="true">
					<attribute name="type" visible="false"/>
					<desc>This tells QuillDriver to display the FORM tag as 'TIB', and to display its contents,
					but to visually suppress its 'type' attribute.</desc>
				</tag>
				<tag name="TRANSL" visible="false" visiblecontents="false"/>
				<tag name="NOTE" visible="false" visiblecontents="false"/>
			</tagview>
			<tagview name="TranslationOnly" keystroke="F3">
                                <tag name="S" visible="false" visiblecontents="true">
                                    <attribute name="id" visible="false"/>
                                    <attribute name="who" visible="false"/>
                                    <desc>This tells QuillDriver to display the S tag as 'S', and to display its contents,
                                    but to visually suppress its 'id' attribute.</desc>
                                </tag>
				<tag name="TRANSL" displayas="if (../@who=../preceding-sibling::S[1]/@who) then '' else (id(../@who))">
					<attribute name="xml:lang" visible="false"/>
					<desc>This tells QuillDriver to display the TRANSL tag as 'ENG', and to display its contents,
					but to visually suppress its 'xml:lang' attribute.</desc>
				</tag>
				<tag name="FORM" visible="false" visiblecontents="false"/>
				<tag name="NOTE" visible="false" visiblecontents="false"/>
			</tagview>
			<tagview name="TranscriptionAndNotes" keystroke="F4">
				<tag name="FORM" displayas="'TIB'" tibetancontents="true">
					<attribute name="type" visible="false"/>
					<desc>This tells QuillDriver to display the FORM tag as 'TIB', and to display its contents,
					but to visually suppress its 'type' attribute.</desc>
				</tag>
				<tag name="NOTE" displayas="@type">
					<attribute name="type" visible="false"/>
					<desc>This tells QuillDriver to render the NOTE tag as the value of its
					'type' attribute.</desc>
				</tag>
				<tag name="TRANSL" visible="false" visiblecontents="false"/>
			</tagview>
		</rendering-instructions>
</qd-configuration>
